{% extends 'base.html' %}
{% load static %}
{% block content %}

    <section class="main_content dashboard_part large_header_bg">

       {% include 'includes/topbar.html' %}

        <div class="main_content_iner ">
            <div class="container-fluid p-0">
                <div class="row justify-content-center">
                    <div class="col-12">
                        <div class="dashboard_header mb_50">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="dashboard_header_title">
                                        <h3>Correct Audio Question</h3>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="dashboard_breadcam text-end">
                                        <p><a href="{% url 'home' %}">Dashboard</a> <i class="fas fa-caret-right"></i> Task Attempt
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="white_box mb_30">
                            <div class="row justify-content-center">
                                <div class="col-lg-10">

                                    <div class="modal-content cs_modal">
                                        <div class="modal-header justify-content-center theme_bg_1">
                                            <h5 class="modal-title text_white">{{task.task_name}}</h5>
                                        </div>
                                        <div class="modal-body">
                                            <p class="textleft"> <h6> Instructions:</h6>You should Write number like 1 3 in correct answer box and submit</p>
                                            
                                            <p class="textleft"><h6>Question:</h6>Students choose one audio clip from a set of four that corresponds to a
                                                given image.</p>

                                            <div class="imgsize">
                                                <img src="{{ task.task_img.url }}" alt="task type 3 question image">
                                            </div>
                                          
                                            <div class="row">
                                            <div class="col-6 col-md-6 col-sm-12">

                                                <p class="textleft mb-2">Audio 1 ---</p>
                                                <audio controls>
                                                    <source src="{{ task.Option1.url }}" type="audio/ogg">
                                                    
                                                    <!-- <source src="horse.mp3" type="audio/mpeg"> -->
                                                    Your browser does not support the audio element.
                                                </audio>
                                                <input type="radio" class="btn-check" name="subject" id="a1" onclick="updateHiddenInput('1')"> 
                                                <label for="a1" class="btn btn-outline-success"> 
                                                    This one! 
                                                </label>
                                            </div>
                                            <div class="col-6 col-md-6 col-sm-12">

                                                <p class="textleft mb-2">Audio 2</p>
                                                <audio controls>
                                                    <source src="{{ task.Option2.url }}" type="audio/ogg">
                                                    <!-- <source src="horse.mp3" type="audio/mpeg"> -->
                                                    Your browser does not support the audio element.
                                                </audio>
                                                <input type="radio" class="btn-check" name="subject" id="a2" onclick="updateHiddenInput('2')"> 
                                                <label for="a2" class="btn btn-outline-success"> 
                                                    This one! 
                                                </label>
                                            </div>
                                            <div class="col-6 col-md-6 col-sm-12">

                                                <p class="textleft mb-2">Audio 3</p>
                                                <audio controls>
                                                    <source src="{{ task.Option3.url }}" type="audio/ogg">
                                                    <!-- <source src="horse.mp3" type="audio/mpeg"> -->
                                                    Your browser does not support the audio element.
                                                </audio>
                                                <input type="radio" class="btn-check" name="subject" id="a3" onclick="updateHiddenInput('3')"> 
                                                <label for="a3" class="btn btn-outline-success"> 
                                                    This one!
                                                </label> 
                                            </div>
                                            <div class="col-6 col-md-6 col-sm-12">

                                                <p class="textleft mb-2">Audio 4</p>
                                                <audio controls>
                                                    <source src="{{ task.Option4.url }}" type="audio/ogg">
                                                    <!-- <source src="horse.mp3" type="audio/mpeg"> -->
                                                    Your browser does not support the audio element.
                                                </audio>
                                                <input type="radio" class="btn-check" name="subject" id="a4" onclick="updateHiddenInput('4')"> 
                                                <label for="a4" class="btn btn-outline-success"> 
                                                        This one!
                                                </label> 
                                            </div>
                                           
                                            </div>
                                         
                                           
                                              
                                              <br><br>
                                            <form method="post" action="" id="myForm">
                                                {% csrf_token %}
                                                <label for="answer"><b>Answer</b></label>
                                                <div class="row">
                                                    

                                                    
                                                <div class="mt-2">
                                                    <input hidden id="answerBox" type="text" name="answer" class="form-control answer"
                                                        placeholder="Image should match audio...">
                                                </div>
                                                
                                                    
                                                </div>
                                                    
                                                
                                                
                                              
                                                <button hidden type="submit" href="#" class="btn_1 full_width text-center">Submit</button>
                                                
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function updateHiddenInput(radioButtonId) {
                // Get the value of the radio button (you can modify this based on your specific needs)
                var radioButtonValue = radioButtonId;
                var hiddenInput = document.getElementById('answerBox');
        
                // Update the value of the hidden input
                document.getElementById('answerBox').value = radioButtonValue;
                // Dispatch input event to input fileds
                hiddenInput.dispatchEvent(new Event('input'));
            }
        </script>
         <script>
            function setupInputListeners() {
                 // Get all input elements with class 'answer'
                 var inputs = document.querySelectorAll('.answer');

                 // Print a message to the console
                 console.log('Found ' + inputs.length + ' input elements with class "answer"');

                 // Attach 'input' event listener to each input
                 inputs.forEach(function (input) {
                     input.addEventListener('input', submitForm);
                 });
             }

             function submitForm() {
                 console.log('Submitting the form');
                 document.getElementById('myForm').submit();  // Submit the form
             }

             // Call the setup function to start the process
             setupInputListeners();
         </script>
        {% endblock %}